<?xml version="1.0" encoding="utf-8"?>
<server>
    <!--ios:1 andriod:2-->
    <platform>1</platform>
 	<!--服务器组名-->
    <server_name>内网测试服</server_name>
 	<!--服务器组ID 取[1,1500]-->
    <server_id>5</server_id>
    <version>1.0</version>
	<!--创角标志 0表示正常创角， 1表示限制创角-->
	<can_create_new_role>0</can_create_new_role>	
    <!--GM等级权限 0:无权限 1:普通gm 2:超级gm-->
	<gm_level>1</gm_level>	
	<!--开服时间-->
    <start_time>2016-08-01</start_time>
    <!--支持混渠道，用;隔开 渠道 0:test 1:apple-->
    <channel>0</channel> 
    <url>
        <!-- cdkey 兑换的web地址  -->
        <cdkey_url>http://139.196.41.108:8080/sg_cdkey/cdkey.php</cdkey_url>
    </url>
    <common>
        <!--连接白名单(监听服只接受来自于在白名单中的IP连接) 多个用;隔开-->
        <ip_white_list>127.0.0.1;47.100.130.174;10.29.44.27;139.196.41.108;101.81.236.201;192.168.1.6;192.168.1.5;192.168.1.178;192.168.1.209;192.168.1.212;192.168.1.223;192.168.1.185;192.168.1.233;192.168.1.232</ip_white_list>
        <!--服务器间重连的间隔时间，单位：秒-->
        <reconnect_interval_time>10</reconnect_interval_time>
        <path>
            <config>../config</config>
            <script>../config/script</script>
            <map>../config/map</map>
            <ai>../config/ai</ai>
        </path>
        <!--发送给日志服务器的日志条数限制-->
        <db_log_count_limit>20</db_log_count_limit>
        <!--0表示按天创建log 1表示按小时创建log-->
        <new_logfile_per_hour>0</new_logfile_per_hour>
        <!--LOG路径-->
        <combat_log_path>/sg_server/logs/combat_log/</combat_log_path>
        <log_path>./logs</log_path>
        <!--是否打印trace类型LOG-->
        <log_trace>1</log_trace>
        <!--是否打印debug类型LOG-->
        <log_debug>1</log_debug>
        <!--是否打印info类型LOG-->
        <log_info>1</log_info>
        <!--消息统计LOG-->  
        <log_msg_count>0</log_msg_count>
        <log>
          <achieve>0</achieve>
          <fight>0</fight>
          <scene>0</scene>
          <role>11</role>
          <hero>11</hero>
          <equip>11</equip>
          <trade>11</trade>
          <task>11</task>
          <item>11</item>
          <boss>11</boss>
          <treasure>11</treasure>
          <pk>11</pk>
          <rank>11</rank>
          <role_buff>11</role_buff>
          <red_point>11</red_point>
          <lifeforce>11</lifeforce>
          <new_guide>11</new_guide>
          <dungeon>11</dungeon>
          <kingwar>11</kingwar>
          <shop>11</shop>
          <mail>11</mail>
          <friend>11</friend>
          <worldcup>11</worldcup>
          <goods>11</goods>
          <family>11</family>
          <active_reward>11</active_reward>
          <page>11</page>
          <expedition>11</expedition>
          <troop>11</troop>
          <arena>11</arena>
          <money>11</money>
          <tower>11</tower>
          <multi>11</multi>
          <redbag>11</redbag>
          <offline_arena>11</offline_arena>
          <country>11</country>
          <liandan>11</liandan>
          <patrol_hire>11</patrol_hire>
          <activity>11</activity>
        </log>
    </common>

    <!--login配置-->
    <login_server>
        <!--服务器人数限制，超过该人数则开始排队-->
        <user_num_max>20000</user_num_max>
        <!--处理排队的timer间隔, 为0表示关闭排队功能。单位：秒-->
        <login_queue_timer>0</login_queue_timer>
        <!--每次处理排队的客户端数量-->
        <login_queue_process>3600</login_queue_process>
        <!--开启IP通道，只有规定的IP才能访问 大于0开启 等于0关闭-->
        <ip_access>0</ip_access>
        <timeout>
            <!--默认500s 和客户端的会话超时，防止客户端sokcet连接上但不发消息占用socket数量 单位：秒-->
            <session>180</session>
        </timeout>
        <thread_num>
            <network>4</network>
        </thread_num>
        <listen>
            <client>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
                <out_ip>192.168.1.5</out_ip>
                <out_port>#OUT_PORT#</out_port>
            </client>
            <gate>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </gate>
        </listen> 
        <connect>
            <account>
                <!--192.168.1.5;139.196.41.108-->
                <ip>139.196.41.108</ip>
				<!--36001;36001-->
                <port>36001</port>
            </account>
        </connect>
    </login_server>
    
    <!--gate配置-->
    <gate_server>
        <thread_num>
            <network>4</network>
        </thread_num>
        <!--移动消息合并-->
		<move_batch>1</move_batch>
        <timeout>
            <!--默认500s 和客户端的会话超时 防止客户端sokcet连接上但不发消息占用socket数量-->
            <session>500</session>
            <!--默认180s 心跳超时 设为0即心跳关闭-->
            <pingpong>180</pingpong>
            <!--默认1800s 心跳超时后等待重连的超时-->
            <reconnect>180</reconnect>
            <!--N毫秒内发送N条消息即为消息轰炸，将被踢下线 默认1000ms 设为0即关闭-->
            <msg_bomb_interval>1000</msg_bomb_interval>
            <!--默认10次-->
            <msg_bomb_count>10</msg_bomb_count>
            <!--通知login人数的时间间隔， 秒--> 
            <notify_login_time>0</notify_login_time>
        </timeout>
        <connect>
            <cross> 
				<!--192.168.1.5;139.196.41.108-->
                <ip>192.168.1.5</ip>
				<!--11002;11002-->
                <port>36007</port>
            </cross>
        </connect>
        <!--理论上一个服20000人 配置4个gate即可-->
		<!-- #GATE_CONF# -->
		<#GATE_NO#>
            <listen>
                <client>
                    <ip>192.168.1.5</ip>
                    <port>#CHANGE_PORT#</port>
                    <out_ip>192.168.1.5</out_ip>
                    <out_port>#OUT_PORT#</out_port>
                </client>
                <game>
                    <ip>192.168.1.5</ip>
                    <port>#CHANGE_PORT#</port>
                </game>
            </listen>
        </#GATE_NO#>	
    </gate_server>

    <!--game配置-->
    <game_server>
        <thread_num>
            <network>4</network>
        </thread_num>
        <!--game同步角色数据到db的容器最大值-->
        <max_role_data_save_size>100</max_role_data_save_size>
        <!--game同步角色数据到db的时间 单位秒-->
        <max_role_data_save_time>30</max_role_data_save_time>
    </game_server>
    
    <!--db配置-->
    <db_server>
        <!--预加载热数据时间（天）-->
		<max_preloading_time>3</max_preloading_time>
		<!--预加载热数据数量 0表示无数量限制-->
		<max_preloading_count>1000</max_preloading_count>
        <thread_num>
            <network>4</network>
        </thread_num>
        <listen>
            <game>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </game>
            <center>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </center>
        </listen>
        <connect>
            <account>
                <!--192.168.1.5;139.196.41.108-->
                <ip>139.196.41.108</ip>
				<!--36002;36002-->
                <port>36002</port>
            </account>
        </connect>
        <mysql>
            <host>127.0.0.1</host>
            <db>sg_game</db>
            <user>root</user>
            <pwd>Sanguo1!</pwd>
            <!--最大连接数-->
            <max_connections>20</max_connections>
        </mysql>
        <redis>
            <host>127.0.0.1</host>
            <port>6379</port>
            <pwd>Sanguo1!</pwd>
            <db>1</db>
			<conn>300</conn>
			<!--redis db 处理线程-->
			<thread_num>4</thread_num>
			<!--redis read 读取处理模块-->
			<read_unit_num>4</read_unit_num>
			<!--redis save 保存处理模块-->
			<save_unit_num>2</save_unit_num>
            <!--保存到sql间隔 秒-->
            <save_interval>1</save_interval>
            <!--单次保存到sql条数限制-->
            <save_count_limit>200</save_count_limit>
        </redis>
    </db_server>

    <!--center配置-->
    <center_server>
        <thread_num>
            <network>4</network>
        </thread_num>
        <listen>
            <game>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </game>
            <gate>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </gate>
            <chat>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </chat>
            <gm>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </gm>
        </listen>
        <connect>
            <transfer>
				<!--192.168.1.5;139.196.41.108-->
                <ip>192.168.1.5</ip>
				<!--30001;30001-->
                <port>36004</port>
            </transfer>
        </connect>
        <redis>
            <host>127.0.0.1</host>
            <port>6379</port>
            <pwd>Sanguo1!</pwd>
            <db>1</db>
			<conn>300</conn>
        </redis>
    </center_server>

    <!--chat配置-->
    <chat_server>
        <thread_num>
            <network>4</network>
        </thread_num>
        <listen>
            <gate>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </gate>
            <game>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </game>
        </listen>
        <connect>
            <transfer>
				<!--192.168.1.5;139.196.41.108-->
                <ip>192.168.1.5</ip>
				<!--30000;30000-->
                <port>36003</port>
            </transfer>
			<video>
				<ip>192.168.1.5</ip>
                <port>12345</port>
			</video>
        </connect>
    </chat_server>

    <!--log配置-->
    <log_server>
        <!--默认60秒-->
        <update_to_db_time>60</update_to_db_time>
        <thread_num>
            <network>4</network>
            <log>4</log>
        </thread_num>
        <listen>
            <game>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </game>
            <center>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
            </center>
        </listen>
        <mysql>
            <host>127.0.0.1</host>
            <db>sg_log</db>
            <user>root</user>
            <pwd>Sanguo1!</pwd>
            <!--默认连接数-->
            <init_connections>5</init_connections>
            <!--最大连接数-->
            <max_connections>20</max_connections>
        </mysql>
    </log_server>
    
    <!--gm配置-->
    <gm_server>
        <thread_num>
            <network>4</network>
        </thread_num>
        <listen>
            <gmtool>
                <ip>192.168.1.5</ip>
                <port>#CHANGE_PORT#</port>
                <out_ip>192.168.1.5</out_ip>
                <out_port>#OUT_PORT#</out_port>
            </gmtool>
        </listen>
		<mysql>
            <host>139.196.41.108</host>
            <db>sg_gm</db>
            <user>root</user>
            <pwd>Sanguo1!</pwd>
        </mysql>
      <!--连接的是db_server.redis信息-->
      <redis>
        <host>127.0.0.1</host>
        <port>6379</port>
        <pwd>Sanguo1!</pwd>
        <db>1</db>
		<conn>300</conn>
      </redis>
    </gm_server>

	<!-- recharge配置 -->
	<recharge_server>
		<thread_num>
			<network>4</network>
		</thread_num>
		<listen>
			<center>
				<ip>192.168.1.5</ip>
				<port>#CHANGE_PORT#</port>
			</center>
		</listen>
		<mysql>
            <host>127.0.0.1</host>
            <db>sg_game</db>
            <user>root</user>
            <pwd>Sanguo1!</pwd>
            <init_connections>5</init_connections><!--默认连接数-->
            <max_connections>20</max_connections><!--最大连接数-->
        </mysql>
	</recharge_server>
</server> 
